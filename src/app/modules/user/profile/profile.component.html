<div class="profile-page">
    <!-- Left column: profile image & summary -->
    <!-- Left column: profile image & summary -->
    <div class="profile-left">
        <div class="profile-photo">
            <img [src]="user.ProfilePhotoUrl || 'https://tse3.mm.bing.net/th/id/OIP.BrIw2jsHGAiKMR-a9OUPbwHaE8?pid=Api&P=0&h=180'"
                alt="Profile Photo">
            <input type="file" id="profileFile" (change)="onPhotoSelected($event)" hidden>
            <label for="profileFile" class="upload-btn">Choose Profile Picture</label>
        </div>
        <h2>{{ user.firstName }} {{ user.lastName }}</h2>

        <!-- Role badge -->
        <div class="badge role-badge">{{ getRoleName(user.roleId) }}</div>

        <!-- Status badge -->
        <div class="badge status-badge" [ngClass]="{'active': user.isActive, 'inactive': !user.isActive}">
            {{ user.isActive ? 'Active' : 'Inactive' }}
        </div>
    </div>


    <!-- Right column: editable user details -->
    <div class="profile-right">
        <div class="form-group">
            <label>Email</label>
            <input type="email" [value]="user.email" disabled>
        </div>

        <div class="form-group">
            <label>First Name</label>
            <input type="text" [(ngModel)]="user.firstName">
        </div>

        <div class="form-group">
            <label>Middle Name</label>
            <input type="text" [(ngModel)]="user.middleName">
        </div>

        <div class="form-group">
            <label>Last Name</label>
            <input type="text" [(ngModel)]="user.lastName">
        </div>

        <div class="form-group">
            <label>Date of Birth</label>
            <input type="date" [value]="dateOfBirthString"
                (change)="user.dateOfBirth = $any($event.target).valueAsDate">
        </div>

        <div class="form-group">
            <label>Mobile Number</label>
            <input type="text" [(ngModel)]="user.mobileNumber">
        </div>

        <div class="form-group">
            <label>Virtual Number</label>
            <input type="text" [(ngModel)]="user.virtualNumber" disabled>
        </div>

        <div class="form-group">
            <label>Emergency Contacts</label>
            <textarea [(ngModel)]="user.emergencyContacts" rows="2"></textarea>
        </div>

        <div class="form-group">
            <label>Emergency Message</label>
            <textarea [(ngModel)]="user.emergencyMessage" rows="2"></textarea>
        </div>

        <div class="form-group">
            <label>Blood Group</label>
            <select [(ngModel)]="user.bloodGroupId">
                <option *ngFor="let bg of bloodGroups" [value]="bg.id">{{bg.name}}</option>
            </select>
        </div>

        <div class="profile-actions">
            <button (click)="saveProfile()">Save Changes</button>
        </div>
    </div>
</div>