<div class="profile-page">
    <!-- Left column: profile image & summary -->
    <div class="profile-left">
        <div class="profile-photo">
            <img [src]="user.ProfilePhotoUrl || 'https://tse3.mm.bing.net/th/id/OIP.BrIw2jsHGAiKMR-a9OUPbwHaE8?pid=Api&P=0&h=180'"
                alt="Profile Photo">
            <input type="file" id="profileFile" (change)="onPhotoSelected($event)" hidden>
            <label for="profileFile" class="upload-btn" title="Upload your profile picture">Choose Profile
                Picture</label>
        </div>
        <h2>
            {{ user.firstName }} {{ user.lastName }}
            <i class="fa-solid fa-circle-check" style="color: #63E6BE;"></i>
        </h2>

        <!-- Role badge -->
        <div class="badge role-badge" title="Your role in the system">{{ getRoleName(user.roleId) }}</div>

        <!-- Status badge -->
        <div class="badge status-badge" [ngClass]="{'active': user.isActive, 'inactive': !user.isActive}"
            title="Current account status">
            {{ user.isActive ? 'Active' : 'Inactive' }}
        </div>
    </div>

    <!-- Right column: editable user details -->
    <div class="profile-right">

        <div class="form-group">
            <label>
                Email
                <i class="fa-solid fa-circle-info" title="Your registered email address"></i>
            </label>
            <input type="email" [value]="user.email" disabled>
        </div>

        <div class="form-group">
            <label>
                First Name
                <i class="fa-solid fa-circle-info" title="Your first name"></i>
            </label>
            <input type="text" [(ngModel)]="user.firstName">
        </div>

        <div class="form-group">
            <label>
                Middle Name
                <i class="fa-solid fa-circle-info" title="Your middle name (optional)"></i>
            </label>
            <input type="text" [(ngModel)]="user.middleName">
        </div>

        <div class="form-group">
            <label>
                Last Name
                <i class="fa-solid fa-circle-info" title="Your last name"></i>
            </label>
            <input type="text" [(ngModel)]="user.lastName">
        </div>

        <div class="form-group">
            <label>
                Date of Birth
                <i class="fa-solid fa-circle-info" title="Your date of birth"></i>
            </label>
            <input type="date" [value]="dateOfBirthString"
                (change)="user.dateOfBirth = $any($event.target).valueAsDate">
        </div>

        <div class="form-group">
            <label>
                Mobile Number
                <i class="fa-solid fa-circle-info" title="Your primary mobile number"></i>
            </label>
            <input type="text" [(ngModel)]="user.mobileNumber">
        </div>

        <div class="form-group">
            <label>
                Virtual Number
                <i class="fa-solid fa-circle-info" title="Virtual number assigned to you"></i>
            </label>
            <input type="text" [(ngModel)]="user.virtualNumber" disabled>
        </div>

        <div class="form-group">
            <label>
                Emergency Contacts
                <i class="fa-solid fa-circle-info" title="Contacts to reach in case of emergency"></i>
            </label>
            <textarea [(ngModel)]="user.emergencyContacts" rows="2"></textarea>
        </div>

        <div class="form-group">
            <label>
                Emergency Message
                <i class="fa-solid fa-circle-info" title="Message to be sent during emergency"></i>
            </label>
            <textarea [(ngModel)]="user.emergencyMessage" rows="2"></textarea>
        </div>

        <div class="form-group">
            <label>
                Blood Group
                <i class="fa-solid fa-circle-info" title="Your blood group"></i>
            </label>
            <select [(ngModel)]="user.bloodGroupId">
                <option *ngFor="let bg of bloodGroups" [value]="bg.id">{{bg.name}}</option>
            </select>
        </div>

        <div class="profile-actions">
            <button title="Save all changes made to your profile" (click)="saveProfile()">Save Changes</button>
        </div>
    </div>
</div>